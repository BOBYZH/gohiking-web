{"version":3,"sources":["pages/SignUp/SignUp.js"],"names":["useStyles","makeStyles","container","display","flexDirection","width","height","arrow","margin","color","title","fontFamily","fontSize","fontWeight","fontStretch","fontStyle","lineHeight","letterSpacing","form","label","errorInfo","passwordInfo","privacyInfo","submit","backgroundColor","SignUp","classes","history","useHistory","useForm","register","handleSubmit","errors","watch","password","useRef","current","responsedJSON","axios","require","React","useState","serverState","setServerState","onSubmit","data","a","console","log","post","then","response","now","Date","localStorage","setItem","token","userId","getTime","expireTime","push","catch","error","signup","msg","finally","className","onClick","name","placeholder","fullWidth","inputRef","required","email","type","minLength","validate","value","password_repeat","message","to","style","variant"],"mappings":"kPASMA,EAAYC,YAAW,CAC3BC,UAAW,CACTC,QAAS,OACTC,cAAe,SACfC,MAAO,OACPC,OAAQ,QAEVC,MAAO,CACLC,OAAQ,sBACRC,MAAO,WAETC,MAAO,CACLL,MAAO,OACPC,OAAQ,OACRE,OAAQ,uBACRG,WAAY,gBACZC,SAAU,OACVC,WAAY,MACZC,YAAa,SACbC,UAAW,SACXC,WAAY,MACZC,cAAe,QACfR,MAAO,WAETS,KAAM,CACJV,OAAQ,oBAEVW,MAAO,CACLd,MAAO,OACPC,OAAQ,OACRE,OAAQ,mBACRG,WAAY,gBACZC,SAAU,OACVC,WAAY,MACZC,YAAa,SACbC,UAAW,SACXC,WAAY,MACZC,cAAe,QACfR,MAAO,WAETW,UAAW,CACTf,MAAO,OACPC,OAAQ,MACRE,OAAQ,sBACRG,WAAY,gBACZC,SAAU,OACVC,WAAY,SACZC,YAAa,SACbC,UAAW,SACXC,WAAY,MACZC,cAAe,QACfR,MAAO,WAETY,aAAc,CACZhB,MAAO,QACPC,OAAQ,OACRE,OAAQ,sBACRG,WAAY,gBACZC,SAAU,OACVC,WAAY,SACZC,YAAa,SACbC,UAAW,SACXC,WAAY,MACZC,cAAe,QACfR,MAAO,WAETa,YAAa,CACXjB,MAAO,yBACPC,OAAQ,OACRE,OAAQ,eACRG,WAAY,gBACZC,SAAU,OACVC,WAAY,SACZC,YAAa,SACbC,UAAW,SACXC,WAAY,MACZC,cAAe,QACfR,MAAO,WAETc,OAAQ,CACNlB,MAAO,yBACPC,OAAQ,OACRE,OAAQ,mBACRgB,gBAAiB,UACjBf,MAAO,aA0FIgB,UAtFA,WACb,IAAMC,EAAU1B,IACV2B,EAAUC,cAChB,EAAkDC,cAA1CC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,aAAcC,EAAhC,EAAgCA,OAAQC,EAAxC,EAAwCA,MAClCC,EAAWC,iBAAO,IACxBD,EAASE,QAAUH,EAAM,WAAY,IACrC,IAQII,EAREC,EAAQC,EAAQ,KACtB,EAAsCC,IAAMC,WAA5C,mBAAOC,EAAP,KAAoBC,EAApB,KAUMC,EAAQ,uCAAG,WAAOC,GAAP,SAAAC,EAAA,6DACfC,QAAQC,IAAIH,GADG,SAETP,EAAMW,KAAK,qDAAsDJ,GACtEK,MAAK,SAAUC,GACd,IAAMC,EAAM,IAAIC,KAChBN,QAAQC,IAAI,WACZX,EAAgBc,EAASN,KACzBS,aAAaC,QAAQ,QAASJ,EAASN,KAAKW,OAC5CF,aAAaC,QAAQ,SAAUJ,EAASN,KAAKY,QAC7CH,aAAaC,QAAQ,aAAcH,EAAIM,UAAYP,EAASN,KAAKc,YACjEhC,EAAQiC,KAAK,mBAEdC,OAAM,SAAUC,GArBU,IAACC,EAAQC,EAsBlCjB,QAAQC,IAAI,SACZX,EAAgByB,EAAMX,SAASN,KAvBLkB,GAwBL,EAxBaC,EAwBN3B,EAAcyB,MAvB5CnB,EAAe,CACboB,SACAC,WAuBDC,SAAQ,WACPlB,QAAQC,IAAIX,MAlBC,2CAAH,sDA0Bd,OACE,sBAAK6B,UAAWxC,EAAQxB,UAAxB,UACE,cAAC,IAAD,CAAegE,UAAWxC,EAAQnB,MAAO4D,QAN7C,WACExC,EAAQiC,KAAK,cAMX,qBAAKM,UAAWxC,EAAQhB,MAAxB,sCACA,uBAAMwD,UAAWxC,EAAQR,KAAM0B,SAAUb,EAAaa,GAAtD,UACE,uBAAOsB,UAAWxC,EAAQP,MAA1B,sCACA,cAAC,IAAD,CAAOiD,KAAK,QAAQC,YAAY,6CAAUC,WAAS,EAACC,SAAUzC,EAAS,CAAE0C,UAAU,MACnF,qBAAKN,UAAWxC,EAAQN,UAAxB,SAAoCY,EAAOyC,OAAS,wCACpD,uBAAOP,UAAWxC,EAAQP,MAA1B,0BAA2C,uBAC3C,cAAC,IAAD,CAAOiD,KAAK,WAAWM,KAAK,WAAWL,YAAY,iCAAQC,WAAS,EAACC,SACLzC,EAAS,CACP0C,UAAU,EACVG,UAAW,MAE7E,qBAAKT,UAAWxC,EAAQN,UAAxB,SAAoCY,EAAOE,UAAY,wEACvD,uBAAOgC,UAAWxC,EAAQP,MAA1B,sCAA6C,uBAC7C,cAAC,IAAD,CAAOkD,YAAY,6CAAUD,KAAK,kBAAkBM,KAAK,WAAWJ,WAAS,EAACC,SAAUzC,EAAS,CACzC8C,SAAU,SAAAC,GAAK,OACfA,IAAU3C,EAASE,SAAW,4CAEtF,sBAAK8B,UAAWxC,EAAQN,UAAxB,UACGY,EAAO8C,iBAAmB,4BAAI9C,EAAO8C,gBAAgBC,UACrDrC,GACD,qBAAKwB,UAAWxC,EAAQN,UAAxB,SAAoCsB,EAAYsB,SAGlD,sBAAKE,UAAWxC,EAAQJ,YAAxB,mIACC,cAAC,OAAD,CAAM0D,GAAG,iBAAiBC,MAAO,CAAExE,MAAO,WAA1C,4CADD,qBACuE,cAAC,OAAD,CAAMuE,GAAG,WAAWC,MAAO,CAAExE,MAAO,WAApC,sCADvE,YAIA,cAAC,IAAD,CACEiE,KAAK,SACLJ,WAAS,EACTY,QAAQ,YACRhB,UAAWxC,EAAQH,OAJrB","file":"static/js/41.58b76f5d.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button'\r\nimport React, { useRef } from 'react'\r\nimport Input from '@material-ui/core/Input'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { useForm } from 'react-hook-form';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  arrow: {\r\n    margin: '40px 371px 0px 16px',\r\n    color: '#00d04c',\r\n  },\r\n  title: {\r\n    width: '98px',\r\n    height: '36px',\r\n    margin: '61px 297px 31px 16px',\r\n    fontFamily: 'NotoSansCJKtc',\r\n    fontSize: '24px',\r\n    fontWeight: '500',\r\n    fontStretch: 'normal',\r\n    fontStyle: 'normal',\r\n    lineHeight: '1.5',\r\n    letterSpacing: '0.5px',\r\n    color: '#232323',\r\n  },\r\n  form: {\r\n    margin: '0 16px 48px 16px',\r\n  },\r\n  label: {\r\n    width: '66px',\r\n    height: '24px',\r\n    margin: '0px 0px 31px 0px',\r\n    fontFamily: 'NotoSansCJKtc',\r\n    fontSize: '16px',\r\n    fontWeight: '500',\r\n    fontStretch: 'normal',\r\n    fontStyle: 'normal',\r\n    lineHeight: '1.5',\r\n    letterSpacing: '0.5px',\r\n    color: '#232323',\r\n  },\r\n  errorInfo: {\r\n    width: '100%',\r\n    height: '0px',\r\n    margin: '16px 321px 55px 0px',\r\n    fontFamily: 'NotoSansCJKtc',\r\n    fontSize: '14px',\r\n    fontWeight: 'normal',\r\n    fontStretch: 'normal',\r\n    fontStyle: 'normal',\r\n    lineHeight: '1.5',\r\n    letterSpacing: '0.5px',\r\n    color: '#ff3b30',\r\n  },\r\n  passwordInfo: {\r\n    width: '169px',\r\n    height: '24px',\r\n    margin: '16px 211px 55px 0px',\r\n    fontFamily: 'NotoSansCJKtc',\r\n    fontSize: '14px',\r\n    fontWeight: 'normal',\r\n    fontStretch: 'normal',\r\n    fontStyle: 'normal',\r\n    lineHeight: '1.5',\r\n    letterSpacing: '0.5px',\r\n    color: '#979797',\r\n  },\r\n  privacyInfo: {\r\n    width: '-webkit-fill-available',\r\n    height: '45px',\r\n    margin: '75px 0px 0px',\r\n    fontFamily: 'NotoSansCJKtc',\r\n    fontSize: '14px',\r\n    fontWeight: 'normal',\r\n    fontStretch: 'normal',\r\n    fontStyle: 'normal',\r\n    lineHeight: '1.5',\r\n    letterSpacing: '0.5px',\r\n    color: '#232323',\r\n  },\r\n  submit: {\r\n    width: '-webkit-fill-available',\r\n    height: '48px',\r\n    margin: '40px 0px 0px 0px',\r\n    backgroundColor: '#00d04c',\r\n    color: '#ffffff',\r\n  },\r\n})\r\n\r\nconst SignUp = () => {\r\n  const classes = useStyles()\r\n  const history = useHistory()\r\n  const { register, handleSubmit, errors, watch } = useForm()\r\n  const password = useRef({});\r\n  password.current = watch(\"password\", \"\");\r\n  const axios = require('axios');\r\n  const [serverState, setServerState] = React.useState();\r\n  const handleServerResponse = (signup, msg) => {\r\n    setServerState({\r\n      signup,\r\n      msg\r\n    });\r\n  };\r\n  let responsedJSON;\r\n\r\n  // API POST\r\n  const onSubmit = async (data) => {\r\n    console.log(data);\r\n    await axios.post('https://gohiking-server.herokuapp.com/api/register', data)\r\n    .then(function (response) {\r\n      const now = new Date()\r\n      console.log('correct');\r\n      responsedJSON = response.data\r\n      localStorage.setItem('token', response.data.token)\r\n      localStorage.setItem('userId', response.data.userId)\r\n      localStorage.setItem('expireTime', now.getTime() + response.data.expireTime)\r\n      history.push(\"/register0_1\");\r\n    })\r\n    .catch(function (error) {\r\n      console.log('error');\r\n      responsedJSON = error.response.data;\r\n      handleServerResponse(false, responsedJSON.error)\r\n    })\r\n    .finally(function () {\r\n      console.log(responsedJSON);\r\n    });  \r\n  }\r\n \r\n  function backhandleClick() {\r\n    history.push(\"/signin\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <ArrowBackIcon className={classes.arrow} onClick={backhandleClick} />\r\n      <div className={classes.title}>註冊帳號</div>\r\n      <form className={classes.form} onSubmit={handleSubmit(onSubmit)} >\r\n        <label className={classes.label}>電子信箱</label>\r\n        <Input name=\"email\" placeholder=\"請輸入電子信箱\" fullWidth inputRef={register({ required: true })} />\r\n        <div className={classes.errorInfo}>{errors.email && \"請輸入正確Email\"}</div>\r\n        <label className={classes.label}>密碼</label><br />\r\n        <Input name=\"password\" type=\"password\" placeholder=\"請輸入密碼\" fullWidth inputRef={\r\n                                                                        register({ \r\n                                                                          required: true,\r\n                                                                          minLength: 8\r\n                                                                        })} />                                                             \r\n        <div className={classes.errorInfo}>{errors.password && \"密碼必須包含8個字元以上\"}</div>\r\n        <label className={classes.label}>確認密碼</label><br />\r\n        <Input placeholder=\"請重新輸入密碼\" name=\"password_repeat\" type=\"password\" fullWidth inputRef={register({ \r\n                                                                validate: value =>\r\n                                                                value === password.current || \"密碼不一致！\" \r\n                                                                })} />\r\n        <div className={classes.errorInfo}>\r\n          {errors.password_repeat && <p>{errors.password_repeat.message}</p>}\r\n          {serverState && (\r\n          <div className={classes.errorInfo}>{serverState.msg}</div>\r\n          )}\r\n        </div>\r\n        <div className={classes.privacyInfo}>使用這個應用程式前，請先詳閱「Go Hiking」的\r\n        《<Link to=\"/privacyPolicy\" style={{ color: '#007aff' }}>隱私權政策</Link>》及《<Link to=\"/aboutUs\" style={{ color: '#007aff' }}>服務條款</Link>》\r\n        </div>\r\n        \r\n        <Button\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          className={classes.submit}\r\n        >\r\n          同意並註冊\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SignUp\r\n"],"sourceRoot":""}